<!DOCTYPE html>
<html lang="en" data-theme="cerbi-light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CerbiSuite — Unified Logging, Governance & Observability</title>

  <!-- Brand + palette -->
  <meta name="theme-color" content="#fffdf7" />
  <meta name="description" content="CerbiSuite: Unified logging with governance and observability. Compliance-ready, ML-friendly, and portable." />
  <meta name="keywords" content="Cerbi, CerbiSuite, logging, governance, observability, compliance, .NET, Roslyn analyzer, runtime validation" />
  <meta property="og:title" content="CerbiSuite — Unified Logging, Governance & Observability" />
  <meta property="og:description" content="Bring order to log chaos. Enforce structure, enable audit-ready compliance, and feed ML-ready pipelines—without lock-in." />
  <meta property="og:image" content="assets/CerbiShield.png" />

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Roboto+Mono:wght@400;600&display=swap" rel="stylesheet">

  <!-- ============= SINGLE LIGHT THEME (no cycler) ============= -->
  <style>
    :root{
      /* Brand & accents */
      --brand:#FF4D00;                /* logo orange */
      --navy:#142848;                 /* deep navy for contrast */
      --bg:#fffdf7;                   /* warm light */
      --panel:#ffffff;
      --panel-2:#f6f8fb;
      --muted:#5a6a88;
      --text:#182235;
      --text-strong:#0b1324;
      --link: #0f63ff;                /* accent blue link */
      --radius:14px;
      --shadow: 0 14px 40px rgba(10,16,30,.12);
      --ring: 0 0 0 4px color-mix(in srgb, var(--brand), white 70%);
      --glyph:#1b3159;                /* navy-ish clock */
      --glyph-strong:#0f2444;

      --nav-h:64px;
      --container: min(1200px, 92vw);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:var(--bg); color:var(--text); font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility; line-height:1.55;
    }
    a{color:var(--link); text-decoration:none}
    a:hover{text-decoration:underline}
    code,pre{font-family:"Roboto Mono", ui-monospace, Menlo, Consolas, monospace}
    h1,h2,h3,h4,h5{color:var(--text-strong); margin:.2em 0 .35em}
    .container{width:var(--container); margin-inline:auto}

    /* NAV */
    .nav{
      position:sticky; top:0; z-index:1000; background:rgba(255,255,255,.82); backdrop-filter:saturate(1.2) blur(10px);
      border-bottom:1px solid rgba(20,40,72,.08);
    }
    .nav-inner{display:flex; align-items:center; justify-content:space-between; gap:16px; padding:10px 0}
    .brand{display:flex; align-items:center; gap:10px; text-decoration:none; color:var(--text-strong); font-weight:800}
    .brand img{height:36px; width:auto; border-radius:8px; filter:drop-shadow(0 0 10px rgba(255,77,0,.25))}
    .brand span{letter-spacing:.2px}
    /* responsive primary nav with "More" bucket (no scrollbars) */
    .nav-links{display:flex; gap:8px; align-items:center; flex: 1 1 auto; justify-content:center; min-width:0}
    .nav-links a{
      white-space:nowrap; padding:8px 10px; border-radius:10px; color:var(--navy);
    }
    .nav-links a:hover{background:var(--panel-2)}
    .nav-actions{display:flex; gap:8px; align-items:center}
    .btn{appearance:none; border:none; cursor:pointer; border-radius:12px; padding:10px 14px; font-weight:700; transition:transform .06s ease, box-shadow .2s ease, background .2s ease}
    .btn-primary{background:var(--brand); color:#fff; box-shadow:var(--shadow)}
    .btn-primary:hover{transform:translateY(-1px)}
    .btn-ghost{background:transparent; color:var(--link); outline:1px solid color-mix(in srgb, var(--link), transparent 50%)}
    .more{position:relative}
    .more>button{background:var(--panel-2); color:var(--text); border:1px solid rgba(20,40,72,.12)}
    .more-menu{
      position:absolute; right:0; top:calc(100% + 8px); background:var(--panel); border:1px solid rgba(20,40,72,.12); border-radius:12px; box-shadow:var(--shadow);
      padding:8px; display:none; min-width:220px
    }
    .more-menu a{display:block; padding:8px 10px; border-radius:8px}
    .more-menu a:hover{background:var(--panel-2)}
    .more[data-open="true"] .more-menu{display:block}

    /* HERO */
    .hero{padding:38px 0 12px}
    .hero .hero-bg{
      width:100%; height:360px; border-radius:22px; display:block;
      background: radial-gradient(1200px 420px at 75% -20%, color-mix(in srgb, var(--brand), white 78%), transparent 60%), linear-gradient(180deg, #ffffff, #f3f7ff);
      border:1px solid rgba(20,40,72,.12);
      box-shadow: var(--shadow);
      position:relative; overflow:hidden;
    }
    .chip-row{display:flex; gap:8px; flex-wrap:wrap; margin-top:14px}
    .chip{background:#e8f0ff; color:#1b3159; padding:6px 10px; border-radius:999px; border:1px solid rgba(20,40,72,.12)}
    .hl{color:var(--brand)}
    .hero h1{
      margin:14px 0 10px;
      font-size: clamp(28px, 5vw, 48px);
      line-height:1.08;
      background: linear-gradient(90deg, var(--brand), #ff8443 35%, #0f63ff 80%);
      -webkit-background-clip:text; background-clip:text; color:transparent;
    }
    .sub{color:var(--muted); max-width:70ch}
    .hero-cta-row{display:flex; gap:10px; flex-wrap:wrap; margin-top:10px}

    /* VALUE ROTATOR (compact) */
    .value-rotator{margin-top:14px; background:var(--panel); border:1px solid rgba(20,40,72,.12); border-radius:14px; box-shadow:var(--shadow)}
    .dash-slider{position:relative}
    .dash-slider .slide{display:none; padding:14px}
    .dash-slider .slide.active{display:block}
    .dash-slider .dots{display:flex; gap:6px; padding:0 12px 12px 12px}
    .dash-slider .dots button{width:8px; height:8px; border-radius:50%; border:0; background:#d5deff}
    .dash-slider .dots button.active{background:var(--brand)}

    /* FULL BLEED */
    .full-bleed-wrap{position:relative}
    .full-bleed{width:100%; max-width:none}

    /* POP-ART */
    .sig-rotator{position:relative; display:grid; place-items:center; overflow:hidden; min-height:clamp(220px, 42vw, 520px); background:var(--panel)}
    .sig-rotator img{position:absolute; inset:0; width:100%; height:100%; object-fit:cover; opacity:0; visibility:hidden; transform:scale(1.02); transition:opacity .4s ease, visibility .4s ease, transform .5s ease}
    .sig-rotator img.is-active{opacity:1; visibility:visible; transform:none}
    .img-cap{color:var(--muted); text-align:center}
    #sigCapCenter{text-align:center}

    /* GRID + CARDS */
    .section{padding:32px 0}
    .eyebrow{font-size:12px; letter-spacing:.16em; color:var(--muted); text-transform:uppercase}
    .lead{color:var(--muted)}
    .grid{display:grid; gap:14px; grid-template-columns:repeat(4,minmax(0,1fr))}
    .col-6{grid-column:span 2}
    .col-12{grid-column:span 4}
    .card{background:var(--panel); border:1px solid rgba(20,40,72,.12); border-radius:14px; padding:16px; box-shadow: var(--shadow)}
    .card:hover{transform:translateY(-1px)}
    .muted{color:var(--muted)}

    /* DASHBOARD — full width carousel */
    .showcase{border-radius:18px; overflow:hidden; border:1px solid rgba(20,40,72,.12)}
    .showcase-inner{position:relative}
    .showcase-viewport{position:relative; width:100%; height: clamp(320px, 56vw, 820px)}
    .showcase-viewport .slide{position:absolute; inset:0; margin:0; opacity:0; visibility:hidden; transition:opacity .5s ease}
    .showcase-viewport .slide.active{opacity:1; visibility:visible}
    .showcase-viewport img{width:100%; height:100%; object-fit:cover}
    .dash-arrows{position:absolute; inset:auto 0 12px 0; display:flex; gap:8px; justify-content:center}
    .dash-arrows .btn-ghost{background:rgba(255,255,255,.86)}
    .showcase .dots{position:absolute; bottom:12px; left:12px; display:flex; gap:6px}
    .showcase .dots button{width:10px; height:10px; border-radius:50%; border:0; background:#e1e6ff}
    .showcase .dots button.active{background:var(--brand)}

    /* TABLE */
    .table{width:100%; border-collapse:collapse}
    .table th,.table td{border:1px solid rgba(20,40,72,.12); padding:.6em .7em}
    .table th{background:#f0f3fa; color:var(--navy)}

    /* ARCHITECTURE image constraints */
    .arch-diagram img{width:100%; height:auto; border-radius:12px; border:1px solid rgba(20,40,72,.12)}
    .arch-diagram{max-width:900px}

    /* CONTACT IFRAME */
    .prose-doc{width:min(100vw, 960px); max-height:min(90vh, 900px); overflow:auto; padding:22px 26px; border-radius:12px; background:#fff; color:var(--text); border:1px solid rgba(20,40,72,.18); box-shadow:var(--shadow); line-height:1.55}

    /* OVERLAYS (guarded closed by default) */
    .lightbox{position:fixed; inset:0; display:none !important; place-items:center; background:rgba(20,24,32,.65); backdrop-filter:blur(6px); z-index:1100}
    .lightbox[aria-hidden="false"]{display:grid !important}
    .lightbox .close{position:absolute; top:20px; right:20px; background:#fff; border:0; width:44px; height:44px; border-radius:12px; box-shadow:var(--shadow)}
    #lightboxImg{max-width:min(96vw,1600px); max-height:90vh; border-radius:12px; box-shadow:var(--shadow); background:#000}
    .footer{padding:18px 0; border-top:1px solid rgba(20,40,72,.12); background:rgba(255,255,255,.7)}

    /* GLYPH CLOCK (bold, glitch) */
    #bg-clock{
      position:fixed; inset:0; z-index:-2; pointer-events:none; display:grid; place-items:center; user-select:none; line-height:1;
      color:var(--glyph); opacity:var(--clock-opacity,.22);
      font-weight:800; letter-spacing:.04em;
      filter: drop-shadow(0 12px 24px rgba(10,16,30,.18));
    }
    .glitch{
      position:relative; display:inline-block;
      text-shadow:
        2px 0 0 rgba(255,77,0,.20),
       -2px 0 0 rgba(15,99,255,.18);
    }

    /* CONTACT FAB (clean hover) */
    .contact-fab{
      position:fixed; right:20px; top:50%; transform:translateY(-50%);
      width:56px; height:56px; display:grid; place-items:center; border-radius:16px;
      background:var(--brand); color:#fff; text-decoration:none; box-shadow:var(--shadow); z-index:900; overflow:hidden;
      border:1px solid rgba(0,0,0,.04)
    }
    .contact-fab img{width:28px; height:28px}
    .contact-fab .label{
      position:absolute; right:56px; top:0; bottom:0; display:grid; place-items:center; padding:0 12px; background:rgba(255,255,255,.9);
      color:var(--text-strong); border:1px solid rgba(20,40,72,.12); border-radius:12px 0 0 12px; transform:translateX(10px); opacity:0; transition:transform .18s ease, opacity .18s ease
    }
    .contact-fab:hover .label{transform:none; opacity:1}

    /* Accessibility */
    :focus-visible{outline:none; box-shadow:var(--ring)}

    /* Responsive */
    @media (max-width: 980px){
      .grid{grid-template-columns:repeat(2,minmax(0,1fr))}
      .col-6{grid-column:span 2}
      .col-12{grid-column:span 2}
      .showcase-viewport{height:clamp(280px,60vw,700px)}
    }
    @media (max-width: 640px){
      .grid{grid-template-columns:1fr}
      .col-6,.col-12{grid-column:span 1}
      .contact-fab{right:12px; top:auto; bottom:14px; transform:none}
    }

    /* Background canvas layers (kept behind content) */
    #dynamic-bg{position:fixed; inset:0; z-index:-6; pointer-events:none; overflow:hidden}
    .tiles{position:fixed; inset:0; z-index:-6; pointer-events:none}
    .sky{position:fixed; inset:0; z-index:-5; pointer-events:none}
    .veil{position:fixed; inset:0; z-index:-4; pointer-events:none}
    .spotlight{position:fixed; inset:0; z-index:-3; pointer-events:none}
  </style>

  <!-- Favicons -->
  <link rel="icon" href="https://raw.githubusercontent.com/Zeroshi/CerbiSite/refs/heads/main/assets/favicon.ico" sizes="any" />
  <link rel="icon" type="image/png" sizes="16x16" href="https://github.com/Zeroshi/CerbiSite/raw/main/assets/favicon-16x16.png" />
  <link rel="apple-touch-icon" sizes="150x150" href="https://github.com/Zeroshi/CerbiSite/raw/main/assets/mstile-150x150.png" />
  <meta name="msapplication-TileImage" content="https://github.com/Zeroshi/CerbiSite/raw/main/assets/mstile-150x150.png" />
</head>

<body>
  <!-- Dynamic background -->
  <div id="dynamic-bg" aria-hidden="true"><canvas id="bgCanvas"></canvas></div>
  <div class="tiles" aria-hidden="true"></div>
  <canvas id="sky" class="sky" aria-hidden="true"></canvas>
  <div class="veil" aria-hidden="true"></div>
  <div class="spotlight" aria-hidden="true"></div>

  <!-- GLYPH CLOCK (glitch/time) -->
  <div id="bg-clock" aria-hidden="true"><span id="clockText" class="glitch">00:00</span></div>

  <!-- Ribbon -->
  <div id="topRibbon" class="ribbon ribbon-beta" role="status" style="position:relative;background:linear-gradient(0deg, rgba(0,0,0,.04), rgba(0,0,0,.04)), rgba(255,255,255,.82); border-bottom:1px solid rgba(20,40,72,.08)">
    <div class="container ribbon-inner" style="display:flex;justify-content:space-between;align-items:center;gap:12px;padding:8px 0">
      <div class="rb-copy"><strong>CerbiShield Dashboard</strong> — Beta preview available.</div>
      <div class="rb-ctas">
        <a class="btn btn-ghost btn-sm" href="#dashboards">See preview</a>
        <a class="btn btn-primary btn-sm" href="https://form.jotform.com/252385904589067" target="_blank" rel="noopener">Request access</a>
      </div>
    </div>
  </div>

  <!-- Nav -->
  <header id="siteNav" class="nav">
    <div class="container nav-inner">
      <a href="#top" class="brand" aria-label="Cerbi — back to top">
        <img src="assets/CerbiLogo.png" alt="" decoding="async" fetchpriority="high" />
        <span>CerbiSuite</span>
      </a>

      <nav id="primaryNav" class="nav-links" aria-label="Primary">
        <!-- Keep order; JS will move overflow items to "More" -->
        <a href="#why">Why</a><a href="#usecases">Use Cases</a><a href="#quickstart">Quick Start</a>
        <a href="#ecosystem">Ecosystem</a><a href="#governance">Governance</a><a href="#dashboards">Dashboards</a>
        <a href="#packages">Packages</a><a href="#repos">Repos</a><a href="#compare">Compare</a>
        <a href="#architecture">Architecture</a><a href="#roadmap">Roadmap</a><a href="#interop">Interoperability</a><a href="#partners">Partners</a>
        <a href="docs/company.md" class="doc-link">Company</a>
        <a href="#contact">Contact</a>
      </nav>

      <div class="nav-actions">
        <a class="btn btn-ghost" href="#contact" role="button">Contact</a>
        <a class="btn btn-primary" href="https://github.com/Zeroshi/Cerbi-CerbiStream" target="_blank" rel="noopener" role="button">GitHub</a>

        <!-- "More" bucket (populated dynamically) -->
        <div class="more" id="moreMenu">
          <button type="button" aria-haspopup="menu" aria-expanded="false" title="More">More ▾</button>
          <div class="more-menu" role="menu" aria-label="More links"></div>
        </div>
      </div>
    </div>
  </header>

  <!-- Progress (thin) -->
  <div id="progress" style="height:2px;background:linear-gradient(90deg,var(--brand),#ff8443); width:var(--progress,0%);"></div>

  <main id="main">
    <!-- ===== HERO ===== -->
    <section class="hero container" id="top">
      <div class="hero-bg" aria-hidden="true"></div>

      <div class="chip-row" role="list" aria-label="High level features">
        <span class="chip">Structured Logging</span><span class="chip">Governance (Build & Runtime)</span>
        <span class="chip">Cloud-Native & Portable</span><span class="chip">Modular</span>
        <span class="chip">Hybrid-Ready</span><span class="chip">ML-Friendly</span>
      </div>

      <h1>Unified Logging, <span class="hl">Governance</span> & <span class="hl">Observability</span></h1>
      <p class="sub">Bring order to log chaos. CerbiSuite enforces structure at the source, enables audit-ready compliance, and feeds ML-ready pipelines—without vendor lock-in.</p>

      <!-- Compact value rotator -->
      <div class="value-rotator">
        <div id="whySlider" class="dash-slider">
          <figure class="slide active">
            <h3>Lower Ingestion & Storage Cost</h3>
            <p class="muted">Normalize & de-duplicate at the source; ship less noise to Splunk/ELK/Datadog.</p>
            <ul><li>Stable fields → smaller indexes & faster queries</li><li>Rollups/tags → fewer high-cardinality surprises</li></ul>
          </figure>
          <figure class="slide">
            <h3>Compliance Without Friction</h3>
            <p class="muted">PII rules at build-time & runtime. Redact & flag—don’t drop critical signals.</p>
            <ul><li>Versioned policies in CerbiShield (RBAC & audit history)</li><li>Relax-mode for safe rollout in prod</li></ul>
          </figure>
          <figure class="slide">
            <h3>Make Every Tool Better</h3>
            <p class="muted">We’re not a sink—we improve what your sinks receive with richer, consistent context.</p>
            <ul><li>Durable dashboards (no silent breakage)</li><li>ML-ready metadata for LLMs & models</li></ul>
          </figure>
          <figure class="slide">
            <h3>Faster Investigations</h3>
            <p class="muted">Consistent correlation (app/env/tenant/trace) across services speeds triage.</p>
            <ul><li>Clean joins through stable shapes</li><li>Actionable violation metadata</li></ul>
          </figure>
          <div class="dots" aria-label="slider controls"></div>
        </div>
      </div>

      <div class="hero-cta-row">
        <a class="btn btn-primary" href="#governance" role="button">Explore Governance</a>
        <a class="btn btn-ghost" href="#ecosystem" role="button">See Ecosystem</a>
      </div>

      <div class="logo-row" aria-label="Trusted by" style="display:flex;gap:18px;justify-content:center;align-items:center;margin-top:8px">
        <img src="assets/CerbiLogo.png" alt="Cerbi logo" style="height:42px;width:auto;opacity:.98;filter:drop-shadow(0 0 14px rgba(255,77,0,.35))" loading="lazy" decoding="async" />
        <img src="assets/CerbiStream.png" alt="CerbiStream logo" style="height:42px;width:auto;opacity:.85" loading="lazy" decoding="async" />
        <img src="assets/CerbiShield.png" alt="CerbiShield logo" style="height:42px;width:auto;opacity:.72" loading="lazy" decoding="async" />
      </div>
    </section>

    <!-- SIGNATURE ART (POP ART) — FULL BLEED -->
    <section id="hero-art" class="section full-bleed-wrap">
      <div class="full-bleed">
        <div class="container">
          <div class="card" style="padding:0;border-radius:18px">
            <div id="sigRotator" class="sig-rotator" role="img" aria-label="Cerbi signature pop-art panels"></div>
            <div class="img-cap" id="sigCapCenter" style="padding:10px 0 16px"><code>Cerbi.</code></div>
          </div>
        </div>
      </div>
    </section>

    <!-- USE CASES -->
    <section id="usecases" class="container section">
      <div class="eyebrow">Real outcomes</div>
      <h2><span class="hl">Use Cases</span> (for teams & execs)</h2>
      <p class="lead">Short, concrete wins you can expect. Each can start small and expand safely across the org.</p>

      <div class="grid">
        <article class="col-4 card"><h3><span class="n">1.</span> Cut Log Spend</h3><p class="muted">Normalize fields, roll up noise, and de-duplicate before indexing.</p><ul><li>Less high-cardinality churn</li><li>Smaller indexes, faster queries</li></ul></article>
        <article class="col-4 card"><h3><span class="n">2.</span> Prove Compliance</h3><p class="muted">Versioned PII policy + redaction metadata you can hand to Risk/Legal.</p><ul><li>Build-time rules + runtime enforcement</li><li>RBAC & audit history in CerbiShield</li></ul></article>
        <article class="col-4 card"><h3><span class="n">3.</span> Stabilize Dashboards</h3><p class="muted">Stop breaking charts every sprint due to field drift.</p><ul><li>Stable names & types</li><li>Durable alerts across releases</li></ul></article>
        <article class="col-4 card"><h3><span class="n">4.</span> Accelerate Incidents</h3><p class="muted">Consistent app/env/tenant/trace IDs → faster triage and MTTR.</p><ul><li>Joinable logs across services</li><li>Violation context included</li></ul></article>
        <article class="col-4 card"><h3><span class="n">5.</span> Ship ML-Ready Telemetry</h3><p class="muted">Clean, governed features for LLMs & models—without PII surprises.</p><ul><li>Tags, categories, enums</li><li>Consistent shapes for training</li></ul></article>
        <article class="col-4 card"><h3><span class="n">6.</span> Adopt Gradually</h3><p class="muted">Start with one domain (e.g., auth), run in relax-mode, then tighten.</p><ul><li>Keep your loggers/sinks</li><li>No vendor lock-in</li></ul></article>
      </div>

      <div class="card" style="padding:16px;margin-top:16px">
        <h3 style="margin:0 0 6px">Business Use Case — Claims Platform (Regulated)</h3>
        <p class="muted">A health insurer modernizes a claims platform across 20+ services. Logs are inconsistent and contain PII. Cerbi introduces a governed profile (<em>HIPAA starter</em> + team rules). Developers see IDE diagnostics for forbidden fields; runtime applies redaction and flags violations instead of dropping events. Splunk dashboards stop breaking, audit requests are answered with versioned policy history, and storage costs drop 28% from reduced high-cardinality fields.</p>
        <ul style="margin-top:8px">
          <li><strong>Why it helps:</strong> lower ingestion cost, faster incident triage, audit-ready evidence.</li>
          <li><strong>How to roll out:</strong> enable analyzer in CI; deploy runtime validators in relax-mode; tighten over 2 sprints.</li>
          <li><strong>Future state:</strong> CerbIQ normalizes cross-domain tags; CerbiSense flags anomalies on governed features.</li>
        </ul>
      </div>

      <div class="hero-cta-row" style="justify-content:center;margin-top:10px">
        <a class="btn btn-primary" href="#governance">See Governance in action</a>
        <a class="btn btn-ghost" href="#packages">Pick your packages</a>
        <a class="btn btn-ghost" href="#compare">Compare approaches</a>
      </div>
    </section>

    <!-- WHY -->
    <section id="why" class="container section">
      <div class="eyebrow">THE PROBLEM</div>
      <h2>Why <span class="hl">CerbiStream</span> Exists</h2>
      <p class="lead">As organizations scale across internal squads, contractors, and third-party libraries, logging becomes a patchwork—hard to trust, hard to use, and risky. Cerbi turns logs into governed, reliable <em>data products</em>.</p>

      <div class="grid" style="margin-top:16px">
        <article class="col-4 card">
          <h3>What goes wrong without guardrails</h3>
          <ul>
            <li><strong>Same idea, many names:</strong> <span class="kbd">userId</span>, <span class="kbd">user_id</span>, <span class="kbd">uid</span>, <span class="kbd">customerId</span>.</li>
            <li><strong>Shape drift:</strong> GUIDs turn into ints; strings turn into blobs.</li>
            <li><strong>PII leakage:</strong> emails/addresses sneak into prod logs.</li>
            <li><strong>Missing metadata:</strong> timestamp, level, env, app, trace IDs aren’t consistent.</li>
            <li><strong>Fragile dashboards:</strong> small field changes break alerts and reports.</li>
            <li><strong>Cost bloat:</strong> noisy, duplicative fields can’t be rolled up or pruned.</li>
          </ul>
        </article>
        <article class="col-4 card">
          <h3>Cerbi’s approach: logs as governed data products</h3>
          <ul>
            <li><strong>Contract (schema + rules):</strong> required/forbidden fields, types, enums, PII policy.</li>
            <li><strong>Build-time enforcement:</strong> Roslyn analyzer catches violations before they ship.</li>
            <li><strong>Runtime enforcement:</strong> validation, redaction, and <em>relax-mode</em> flagging in prod.</li>
            <li><strong>Ownership & versioning:</strong> profiles live in CerbiShield with history, RBAC, rollbacks.</li>
            <li><strong>Analytics-ready metadata:</strong> app, env, tenant, correlation, tags, and categories.</li>
          </ul>
        </article>
        <article class="col-4 card">
          <h3>What changes for your teams</h3>
          <ul>
            <li><strong>Developers:</strong> clear, fixable IDE/CI diagnostics when logging violates policy.</li>
            <li><strong>Runtime:</strong> keep the event, redact/flag violations; don’t lose critical signals.</li>
            <li><strong>Security/Compliance:</strong> versioned policies, RBAC, audit history in CerbiShield.</li>
            <li><strong>Observability/SRE:</strong> stable fields → durable dashboards and alerts.</li>
            <li><strong>Data/ML:</strong> consistent, PII-safe features suitable for modeling and LLMs.</li>
          </ul>
        </article>
      </div>
    </section>

    <!-- QUICK START -->
    <section id="quickstart" class="container section">
      <div class="eyebrow">Get started</div>
      <h2>⚡ <span class="hl">Quick Start</span>: Try <span class="hl">CerbiStream</span> in 60 Seconds</h2>
      <p class="lead">Install from NuGet, configure in <code>Program.cs</code>, and log safely with governance validation.</p>

      <div class="card" style="padding:18px;position:relative">
<pre class="codeblock"><code>// 1) Install
dotnet add package CerbiStream
dotnet add package Cerbi.MEL.Governance
dotnet add package CerbiStream.GovernanceAnalyzer

// 2) Configure in Program.cs (MEL)
using CerbiStream;
var logger = LoggerFactory.Create(builder =>
{
  builder.AddCerbiStream(options =>
  {
    options.WithFileFallback();
    options.UseGovernance("cerbi_governance.json");
  });
}).CreateLogger&lt;Program&gt;();

// 3) Log safely with governance validation
logger.LogInformation("User logged in {@user}", new { UserId = "12345" });
</code></pre>
        <button class="btn btn-ghost" data-copy="#quickstart code" style="position:absolute;top:12px;right:12px">Copy</button>
      </div>

      <p style="margin-top:14px">
        <a class="btn btn-primary" href="https://github.com/Zeroshi/Cerbi-CerbiStream" target="_blank" rel="noopener">View full docs on GitHub →</a>
      </p>
      <div class="hero-cta-row">
        <a class="btn btn-ghost doc-link" href="docs/quickstart-dotnet.md">.NET Quick Start (MD)</a>
        <a class="btn btn-ghost doc-link" href="docs/quickstart-mel-governance.md">MEL Governance Only</a>
        <a class="btn btn-ghost doc-link" href="docs/case-study-claims.md">Case Study (Claims)</a>
      </div>
    </section>

    <!-- ECOSYSTEM -->
    <section id="ecosystem" class="container section">
      <div class="eyebrow">What’s included</div>
      <h2>The <span class="hl">Cerbi</span> Ecosystem</h2>
      <p class="lead">A cohesive suite where each component addresses a critical aspect of enterprise logging.</p>

      <div class="card" style="padding:8px 12px;overflow-x:auto">
        <table aria-label="Cerbi components matrix" class="table">
          <thead><tr><th>Component</th><th>Status</th><th>Purpose</th></tr></thead>
          <tbody>
            <tr>
              <td><strong>CerbiStream</strong></td><td><span class="pill ok">GA</span></td>
              <td>Core .NET logger with structured output and optional encryption. Works with governance analyzers (build-time) and runtime validators.</td>
            </tr>
            <tr>
              <td><strong>CerbiStream.GovernanceAnalyzer</strong></td><td><span class="pill ok">GA</span></td>
              <td>Roslyn analyzer that flags governance issues during build (IDE/CI). Reads project governance profiles.</td>
            </tr>
            <tr>
              <td><strong>Cerbi.MEL.Governance</strong></td><td><span class="pill ok">GA</span></td>
              <td>Runtime governance validator for Microsoft.Extensions.Logging pipelines; applies redaction/flagging based on profiles.</td>
            </tr>
            <tr>
              <td><strong>CerbiShield</strong></td><td><span class="pill beta">Beta (SaaS soon)</span></td>
              <td>Governance dashboard & APIs. Profile authoring, RBAC, audit history, environment-aware deployments, and profile versioning.</td>
            </tr>
            <tr>
              <td><strong>CerbIQ</strong></td><td><span class="pill planned">Phase 2 Planned</span></td>
              <td>Routing, normalization, rollups, fan-out, and app grouping. Turns disparate streams into consistent, analytics-ready datasets.</td>
            </tr>
            <tr>
              <td><strong>CerbiSense</strong></td><td><span class="pill planned">Phase 2 Planned</span></td>
              <td>ML-driven anomaly detection and trend forecasting on governed logs. Risk scoring and proactive alerting with explainability.</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- GOVERNANCE -->
    <section id="governance" class="container section">
      <div class="eyebrow">Policy, then telemetry</div>
      <h2><span class="hl">Governance</span> That Meets Teams Where They Are</h2>
      <p class="lead">Keep Serilog/NLog/MEL—add Cerbi governance today. Or go all-in with CerbiStream. Either way, the <strong>same governance profiles</strong> power build-time diagnostics and runtime enforcement.</p>
      <div class="grid">
        <div class="col-4 card"><h3>Build-Time Enforcement</h3><p class="muted">Roslyn analyzer flags violations in IDE/CI with precise messages—before code ships.</p></div>
        <div class="col-4 card"><h3>Runtime Enforcement</h3><p class="muted">Validators ensure emitted logs comply with your profiles. Redaction & relax-mode keep visibility while preventing leaks.</p></div>
        <div class="col-4 card"><h3>Compliance Starter Kits</h3><p class="muted">HIPAA/GDPR-aligned defaults you can tailor; versioned profiles; audit histories; rule plugins.</p></div>
      </div>

      <!-- Live governance demo -->
      <div class="card" style="padding:16px;margin-top:18px">
        <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:10px">
          <h3 style="margin:0">Live Rule Check (demo)</h3>
          <div style="display:flex;align-items:center;gap:8px">
            <span class="kbd">PII Field</span>
            <button id="piiSwitch" type="button" class="switch" aria-pressed="false" aria-label="Toggle PII field" style="--sw-on:var(--brand);--sw-off:#e8eefc;width:56px;height:30px;border-radius:999px;border:1px solid rgba(20,40,72,.18);background:var(--sw-off);position:relative">
              <span aria-hidden="true" style="position:absolute;inset:3px; width:24px; height:24px; border-radius:50%; background:#fff; box-shadow:0 4px 12px rgba(0,0,0,.18); transform:translateX(0); transition: transform .22s ease" id="piiKnob"></span>
            </button>
          </div>
        </div>
        <div class="demo" style="display:grid;grid-template-columns:1fr 1fr; gap:18px">
          <div class="pane"><strong>Input Log</strong><pre class="kbd" id="inputJson" style="background:#f3f6ff; padding:10px; border-radius:12px; border:1px solid rgba(20,40,72,.12)"></pre></div>
          <div class="pane"><strong>Evaluation</strong><pre class="kbd" id="evalJson" style="background:#f3f6ff; padding:10px; border-radius:12px; border:1px solid rgba(20,40,72,.12)"></pre></div>
        </div>
        <p class="muted" style="margin-top:10px">This demo mirrors Cerbi’s behavior: <em>keep the event</em>, redact sensitive values, and tag violations with metadata for downstream scoring and audit.</p>
      </div>
    </section>

    <!-- DASHBOARDS — FULL WIDTH SHOWCASE -->
    <section id="dashboards" class="section full-bleed-wrap">
      <div class="full-bleed">
        <div class="container">
          <div class="showcase card">
            <div id="dashSlider" class="showcase-inner" aria-roledescription="carousel" tabindex="0">
              <div class="sr-only" aria-live="polite"></div>

              <div class="showcase-viewport">
                <figure class="slide active">
                  <img width="1600" height="900" src="assets/screenshots/cerbishield-hero-1600x900.jpg"
                       srcset="assets/screenshots/cerbishield-hero-1600x900.jpg 1x, assets/screenshots/cerbishield-hero-3200x1800.jpg 2x"
                       sizes="100vw" alt="CerbiShield — Overview"
                       data-full="assets/screenshots/cerbishield-hero-3200x1800.jpg"
                       loading="eager" decoding="async">
                </figure>

                <figure class="slide">
                  <img width="1200" height="900" src="assets/screenshots/cerbishield-profiles-1200x900.jpg"
                       srcset="assets/screenshots/cerbishield-profiles-1200x900.jpg 1x, assets/screenshots/cerbishield-profiles-2400x1800.jpg 2x"
                       sizes="100vw" alt="CerbiShield — Profiles"
                       data-full="assets/screenshots/cerbishield-profiles-2400x1800.jpg"
                       loading="lazy" decoding="async">
                </figure>

                <figure class="slide">
                  <img width="1200" height="900" src="assets/screenshots/cerbishield-violations-1200x900.jpg"
                       srcset="assets/screenshots/cerbishield-violations-1200x900.jpg 1x, assets/screenshots/cerbishield-violations-2400x1800.jpg 2x"
                       sizes="100vw" alt="CerbiShield — Violations"
                       data-full="assets/screenshots/cerbishield-violations-2400x1800.jpg"
                       loading="lazy" decoding="async">
                </figure>

                <figure class="slide">
                  <img width="1600" height="900" src="assets/screenshots/cerbishield-Deploy-1600x900.jpg"
                       sizes="100vw" alt="CerbiShield — Deploy"
                       data-full="assets/screenshots/cerbishield-Deploy-1600x900.jpg"
                       loading="lazy" decoding="async">
                </figure>
              </div>

              <div class="dots" aria-label="Slide controls"></div>
              <div class="dash-arrows">
                <button class="btn btn-ghost" type="button" data-prev>← Prev</button>
                <button class="btn btn-ghost" type="button" data-next>Next →</button>
              </div>
            </div>
            <div class="img-cap">Click any screenshot to open full-size preview. Use ←/→ or swipe to navigate.</div>
          </div>
        </div>
      </div>
    </section>

    <!-- ARCHITECTURE -->
    <section id="architecture" class="container section">
      <div class="eyebrow">How it fits</div>
      <h2>Reference <span class="hl">Architecture</span></h2>
      <p class="lead">Cerbi governs telemetry at the source and plays nicely with your existing loggers, sinks, and BI tools.</p>
      <div class="grid" style="align-items:start;gap:18px">
        <article class="col-6 card">
          <h3>Flow</h3>
          <ul>
            <li>Apps & services emit events</li>
            <li>Build-time analyzers catch schema/PII violations pre-merge</li>
            <li>Runtime validators redact/flag (relax-mode to roll out safely)</li>
            <li>CerbiShield hosts versioned profiles, RBAC, audit history</li>
            <li>Downstream sinks receive clean, consistent data</li>
          </ul>
          <h4 style="margin-top:10px">Implementation notes</h4>
          <ul>
            <li><strong>Profiles:</strong> JSON stored and versioned.</li>
            <li><strong>Build:</strong> <code>CerbiStream.GovernanceAnalyzer</code> adds IDE/CI diagnostics.</li>
            <li><strong>Runtime:</strong> <code>Cerbi.MEL.Governance</code> enforces redaction/flagging, honors <em>Relax()</em>.</li>
            <li><strong>Encryption:</strong> AES/Base64/NoOp via <code>IEncryption</code>; file-fallback with rotation.</li>
          </ul>
        </article>
        <figure class="col-6 img-frame arch-diagram card" style="padding:10px">
          <img
            src="assets/architecture/cerbisuite-architecture-1600x900.png"
            srcset="assets/architecture/cerbisuite-architecture-1600x900.png 1x, assets/architecture/cerbisuite-architecture-1600x900.png 1.5x, assets/architecture/cerbisuite-architecture-1600x900.png 2x"
            sizes="(max-width: 900px) 100vw, 900px"
            alt="Cerbi reference architecture diagram"
            loading="lazy"
            decoding="async">
          <figcaption class="img-cap">Source-governed telemetry → durable dashboards, cheaper ingestion, audit-ready evidence.</figcaption>
        </figure>
      </div>
    </section>

    <!-- INTEROPERABILITY -->
    <section id="interop" class="container section">
      <div class="eyebrow">Plays well with others</div>
      <h2><span class="hl">Interoperability</span> for Devs & Execs</h2>
      <div class="grid" style="gap:18px">
        <article class="col-6 card">
          <h3>Keep your logger</h3>
          <ul>
            <li><strong>MEL (.NET):</strong> <code>builder.AddCerbiStream()</code> adds structured output + governance.</li>
            <li><strong>Serilog / NLog:</strong> use analyzers at build-time and validators at runtime.</li>
            <li><strong>Hybrid:</strong> keep sinks/formatters; Cerbi stabilizes field names/types and attaches correlation.</li>
          </ul>
        </article>
        <article class="col-6 card">
          <h3>Keep your sinks</h3>
          <ul>
            <li><strong>Splunk / ELK / OpenSearch / Datadog / CloudWatch:</strong> send less, cleaner data.</li>
            <li><strong>Durable dashboards:</strong> governed field names/types avoid chart breakage.</li>
            <li><strong>ML-ready:</strong> consistent, PII-safe features feed analytics/LLMs.</li>
          </ul>
        </article>
      </div>
      <p class="muted" style="margin-top:10px">Bottom line: familiar tools; cost control, auditability, faster incident response.</p>
    </section>

    <!-- PACKAGES -->
    <section id="packages" class="container section">
      <div class="eyebrow">Install</div>
      <h2><span class="hl">NuGet Packages</span></h2>
      <div class="grid" style="gap:16px">
        <article class="col-4 card"><h3>CerbiStream</h3><p class="muted">Core structured logger for .NET.</p><a class="btn btn-primary" href="https://www.nuget.org/packages/CerbiStream" target="_blank" rel="noopener">NuGet →</a></article>
        <article class="col-4 card"><h3>Cerbi.MEL.Governance</h3><p class="muted">Runtime governance for Microsoft.Extensions.Logging.</p><a class="btn btn-primary" href="https://www.nuget.org/packages/Cerbi.MEL.Governance" target="_blank" rel="noopener">NuGet →</a></article>
        <article class="col-4 card"><h3>CerbiStream.GovernanceAnalyzer</h3><p class="muted">Roslyn analyzer diagnostics for schema/PII.</p><a class="btn btn-primary" href="https://www.nuget.org/packages/CerbiStream.GovernanceAnalyzer" target="_blank" rel="noopener">NuGet →</a></article>

        <article class="col-4 card"><h3>Cerbi.Governance.Runtime</h3><p class="muted">Common runtime services.</p><a class="btn btn-primary" href="https://www.nuget.org/packages/Cerbi.Governance.Runtime" target="_blank" rel="noopener">NuGet →</a></article>
        <article class="col-4 card"><h3>Cerbi.Governance.Core</h3><p class="muted">Core governance model & policy types.</p><a class="btn btn-primary" href="https://www.nuget.org/packages/Cerbi.Governance.Core" target="_blank" rel="noopener">NuGet →</a></article>
        <article class="col-4 card"><h3>Cerbi.Serilog.GovernanceAnalyzer</h3><p class="muted">Analyzer support for Serilog projects.</p><a class="btn btn-primary" href="https://www.nuget.org/packages/Cerbi.Serilog.GovernanceAnalyzer" target="_blank" rel="noopener">NuGet →</a></article>
      </div>
    </section>

    <!-- REPOSITORIES -->
    <section id="repos" class="container section">
      <div class="eyebrow">Open Source</div>
      <h2><span class="hl">GitHub Repositories</span></h2>
      <div class="grid" style="gap:16px">
        <article class="col-6 card"><h3>CerbiStream</h3><p class="muted">Reference implementation of the structured logger.</p><a class="btn btn-ghost" target="_blank" rel="noopener" href="https://github.com/Zeroshi/Cerbi-CerbiStream">GitHub →</a></article>
        <article class="col-6 card"><h3>CerbiStream.BenchmarkTests</h3><p class="muted">Benchmarks for throughput/allocations.</p><a class="btn btn-ghost" target="_blank" rel="noopener" href="https://github.com/Zeroshi/CerbiStream.BenchmarkTests">GitHub →</a></article>
        <article class="col-6 card"><h3>Cerbi.MEL.Governance</h3><p class="muted">Runtime validator package.</p><a class="btn btn-ghost" target="_blank" rel="noopener" href="https://github.com/Zeroshi/Cerbi.MEL.Governance">GitHub →</a></article>
        <article class="col-6 card"><h3>Cerbi.MEL.Governance.Demo</h3><p class="muted">Demo app for validation and relax-mode.</p><a class="btn btn-ghost" target="_blank" rel="noopener" href="https://github.com/Zeroshi/Cerbi.MEL.Governance.Demo">GitHub →</a></article>
        <article class="col-6 card"><h3>Cerbi.Serilog.GovernanceAnalyzer</h3><p class="muted">Analyzer for Serilog projects.</p><a class="btn btn-ghost" target="_blank" rel="noopener" href="https://github.com/Zeroshi/Cerbi.Serilog.GovernanceAnalyzer">GitHub →</a></article>
        <article class="col-6 card"><h3>Cerbi.Serilog.GovernanceAnalysizer.TestApp</h3><p class="muted">Test harness for analyzer rules.</p><a class="btn btn-ghost" target="_blank" rel="noopener" href="https://github.com/Zeroshi/Cerbi.Serilog.GovernanceAnalysizer.TestApp">GitHub →</a></article>
      </div>
    </section>

    <!-- COMPARE -->
    <section id="compare" class="container section">
      <div class="eyebrow">Decision support</div>
      <h2><span class="hl">Compare Approaches</span></h2>
      <div class="card" style="padding:12px">
        <table class="table">
          <thead>
            <tr><th>Approach</th><th>Pros</th><th>Cons</th><th>Best when…</th></tr>
          </thead>
          <tbody>
            <tr><td><strong>“Just log more”</strong></td><td>Fast to start</td><td>Inconsistent fields, PII risk, higher cost</td><td>Tiny apps, prototypes</td></tr>
            <tr><td><strong>Downstream normalization</strong></td><td>No app changes</td><td>Late fixes, fragile</td><td>Short-term stopgap</td></tr>
            <tr><td><strong>Cerbi governance</strong></td><td>Stable schema, redaction, versioned policy</td><td>Define profiles; add analyzers/validators</td><td>Multi-team apps, compliance</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- ROADMAP -->
    <section id="roadmap" class="container section">
      <div class="eyebrow">What’s shipping</div>
      <h2>Current <span class="hl">Phase</span> & What’s Next</h2>
      <div class="grid" style="gap:18px">
        <article class="col-6 card">
          <h3>Phase 1 (Current)</h3>
          <ul>
            <li>CerbiStream GA (.NET structured logger)</li>
            <li>Governance analyzers (Roslyn)</li>
            <li>Runtime validators (redaction, relax-mode)</li>
            <li>CerbiShield Beta — profiles, RBAC, audit history</li>
          </ul>
        </article>
        <article class="col-6 card">
          <h3>Phase 2 (Planned)</h3>
          <ul>
            <li>CerbIQ — routing, normalization, rollups, fan-out</li>
            <li>CerbiSense — ML anomaly detection & trend forecasting</li>
            <li>Marketplace integrations (Azure/AWS/GCP)</li>
          </ul>
        </article>
      </div>
    </section>

    <!-- CONTACT -->
    <section id="contact" class="container section">
      <div class="eyebrow">Let’s talk</div>
      <h2>Get in <span class="hl">Touch</span></h2>
      <p class="lead">Questions, enterprise inquiries, or marketplace partnership? Reach out and we’ll respond quickly.</p>

      <div class="grid" style="align-items:start;gap:18px">
        <div class="col-12 card" style="padding:16px">
          <iframe title="Contact Cerbi" id="contact-iframe" src="https://form.jotform.com/252385904589067"
                  style="width:100%;max-width:900px;min-height:900px;height:980px;border:0;border-radius:12px;background:rgba(255,255,255,.02);display:block;margin:0 auto"></iframe>
          <script>
            (function(){
              var ifr=document.getElementById('contact-iframe');
              function onMsg(e){
                try{var host=new URL(e.origin).hostname||''; if(!/jotform\.com$/i.test(host)) return;}catch(_){}
                var data=e.data, args=(typeof data==='object')?data:String(data||'').split(':');
                if(args[0]==='setHeight'){var h=parseInt(args[1],10); if(!isNaN(h)&&ifr){ifr.style.height=Math.max(900,h)+'px';}}
                if(args[0]==='scrollIntoView'&&ifr){try{ifr.scrollIntoView();}catch(_){}}}
              window.addEventListener('message',onMsg,false);
            })();
          </script>
          <p class="muted" style="margin-top:10px">Prefer email? <a href="mailto:hello@cerbi.io">hello@cerbi.io</a></p>
          <p class="muted" style="margin-top:6px;font-size:12px;opacity:.85">
            By submitting, you agree to our <a class="doc-link" href="docs/terms.md">Terms</a> and acknowledge our <a class="doc-link" href="docs/privacy.md">Privacy Policy</a>.
          </p>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container" style="display:flex;justify-content:space-between;align-items:center;gap:16px;flex-wrap:wrap">
      <div style="display:flex;align-items:center;gap:10px">
        <img src="assets/CerbiLogo.png" alt="Cerbi logo" style="height:28px;width:auto;border-radius:6px;filter:drop-shadow(0 0 8px rgba(255,77,0,.35))" loading="lazy" decoding="async" />
        <span class="muted">© <span id="year"></span> Cerbi, LLC — Built for the enterprise</span>
      </div>
      <div style="display:flex;gap:8px;flex-wrap:wrap;align-items:center">
        <a class="chip" href="#why">Why</a><a class="chip" href="#usecases">Use Cases</a><a class="chip" href="#quickstart">Quick Start</a>
        <a class="chip" href="#ecosystem">Ecosystem</a><a class="chip" href="#governance">Governance</a><a class="chip" href="#dashboards">Dashboards</a>
        <a class="chip" href="#packages">NuGet</a><a class="chip" href="#compare">Compare</a><a class="chip" href="#architecture">Architecture</a><a class="chip" href="#interop">Interoperability</a><a class="chip" href="#roadmap">Roadmap</a><a class="chip" href="#contact">Contact</a>
        <a class="chip doc-link" href="docs/privacy.md">Privacy</a>
        <a class="chip doc-link" href="docs/terms.md">Terms</a>
        <a class="chip doc-link" href="docs/security.md">Security</a>
        <a class="chip doc-link" href="docs/company.md">Company</a>
        <a class="chip doc-link" href="docs/case-study-claims.md">Case Study</a>
        <img class="partner-mini" src="assets/partners/microsoft-partner.svg" alt="Microsoft Partner" loading="lazy" decoding="async" style="height:22px; width:auto" />
      </div>
    </div>
  </footer>

  <!-- Command palette (kept; opens MD docs into modal) -->
  <div class="cmdk-overlay" id="cmdkOverlay" aria-hidden="true" hidden>
    <div class="cmdk" role="dialog" aria-modal="true" aria-label="Command palette">
      <div class="header"><span class="kbd" aria-hidden="true">⌘K</span><input id="cmdkInput" type="text" placeholder="Search commands… (e.g., 'packages', 'governance')" /></div>
      <div class="list" id="cmdkList"></div>
    </div>
  </div>

  <!-- Contact FAB -->
  <a href="#contact" class="contact-fab" aria-label="Contact">
    <img src="assets/contact-fab.png" alt="" decoding="async" />
    <span class="label">Let’s talk</span>
  </a>

  <!-- IMAGE LIGHTBOX -->
  <div id="lightbox" class="lightbox" aria-hidden="true" hidden>
    <button class="close" aria-label="Close preview">✕</button>
    <img id="lightboxImg" alt="" />
  </div>

  <!-- DOCS MODAL -->
  <div id="docbox" class="lightbox" aria-hidden="true" hidden>
    <button class="close" aria-label="Close docs">✕</button>
    <article id="docboxContent" class="prose-doc"></article>
  </div>

  <!-- Core libs you already referenced -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js" defer></script>

  <!-- ===================== PAGE JS ===================== -->
  <script>
    // Guard overlays CLOSED on boot (fixes random veil/close button on page)
    (function(){
      ['lightbox','docbox','cmdkOverlay'].forEach(id=>{
        var el=document.getElementById(id);
        if(!el) return;
        el.hidden=true; el.setAttribute('aria-hidden','true');
      });
    })();

    // Footer year
    (function(){ const y=document.getElementById('year'); if(y) y.textContent=new Date().getFullYear(); })();

    // Progress bar
    (function(){
      const bar=document.getElementById('progress'); if(!bar) return;
      const on=()=>{const h=document.documentElement; const max=h.scrollHeight-h.clientHeight; const pct=max?(100*((h.scrollTop||document.body.scrollTop)/max)):0; bar.style.setProperty('--progress',pct+'%');};
      on(); addEventListener('scroll',on,{passive:true}); addEventListener('resize',on,{passive:true});
    })();

    // Primary nav "More" bucket (no scrollbars; items overflow into menu)
    (function(){
      const nav=document.getElementById('primaryNav');
      const more=document.getElementById('moreMenu');
      if(!nav||!more) return;
      const bucket=more.querySelector('.more-menu');
      function layout(){
        // reset: move any items back from more-menu
        [...bucket.querySelectorAll('a')].forEach(a=>nav.insertBefore(a, more));
        // if it still overflows, move last items into "More" until it fits
        const max = nav.parentElement.clientWidth - 240; // leave room for brand + actions
        let w=0; let toMove=[];
        [...nav.children].forEach(el=>{
          if(el===more) return;
          w += el.getBoundingClientRect().width + 8;
          if(w > max) toMove.push(el);
        });
        if(toMove.length){
          toMove.forEach(el=>bucket.appendChild(el));
          more.style.display='block';
        } else {
          more.style.display='none';
        }
      }
      layout(); addEventListener('resize', layout);
      more.querySelector('button').addEventListener('click', ()=>{
        const open = more.getAttribute('data-open')==='true';
        more.setAttribute('data-open', String(!open));
        more.querySelector('button').setAttribute('aria-expanded', String(!open));
      });
      document.addEventListener('click', (e)=>{ if(!more.contains(e.target)) { more.setAttribute('data-open','false'); more.querySelector('button').setAttribute('aria-expanded','false'); }});
    })();

    // Glyph clock — bold, navy, faster cycle, Love-Death-ROBOTS-style random letters + current time hold
    (function(){
      const el=document.getElementById('clockText'); if(!el) return;
      function size(){
        const vw=Math.max(document.documentElement.clientWidth, window.innerWidth||0);
        const factor = vw < 820 ? 0.46 : 0.36;
        el.style.fontSize = Math.min(Math.max(vw*factor,120), 980) + 'px';
      }
      size(); addEventListener('resize', size, {passive:true});

      const WORD = "CERBI";
      const GLYPHS = "CEɌB1CER8IƆERBIⵛERB|";
      let tick=0;

      function randomWord(){
        // build a 5-letter variant with occasional swapped glyphs
        let out="";
        for(let i=0;i<WORD.length;i++){
          const c=WORD[i];
          if(Math.random()<0.3){ out += GLYPHS.charAt((Math.random()*GLYPHS.length)|0); }
          else if(Math.random()<0.2){ out += c.toLowerCase(); }
          else { out += c; }
        }
        return out;
      }

      function render(){
        const d=new Date();
        const time=`${String(d.getHours()).padStart(2,'0')}:${String(d.getMinutes()).padStart(2,'0')}`;
        // cycle: 2 quick glitch frames, then hold time longer
        const phase = tick % 12;
        if(phase<=2){ el.textContent = randomWord(); }
        else { el.textContent = time; }
        tick++;
      }
      render();
      setInterval(render, 500); // quick changes; time holds ~2s in the loop
    })();

    // WHY slider dots + autoswitch
    (function(){
      const slider=document.getElementById('whySlider'); if(!slider) return;
      const slides=[...slider.querySelectorAll('.slide')];
      const dotsBox=document.createElement('div'); dotsBox.className='dots';
      dotsBox.innerHTML=slides.map((_,i)=>`<button aria-label="Slide ${i+1}"></button>`).join('');
      slider.appendChild(dotsBox);
      const dots=[...dotsBox.querySelectorAll('button')];
      let i=slides.findIndex(s=>s.classList.contains('active')); if(i<0)i=0;
      const show=n=>{i=(n+slides.length)%slides.length; slides.forEach((s,idx)=>s.classList.toggle('active',idx===i)); dots.forEach((d,idx)=>d.classList.toggle('active',idx===i));};
      dots.forEach((d,idx)=>d.addEventListener('click',()=>show(idx))); show(i);
      let t=setInterval(()=>show(i+1),4500);
      slider.addEventListener('mouseenter',()=>clearInterval(t));
      slider.addEventListener('mouseleave',()=>t=setInterval(()=>show(i+1),4500));
    })();

    // Dash slider + lightbox (full-bleed)
    (function(){
      const slider=document.getElementById('dashSlider'); if(!slider) return;
      const slides=[...slider.querySelectorAll('.slide')];
      const dotsBox=slider.querySelector('.dots');
      const prevBtn=slider.querySelector('[data-prev]'); const nextBtn=slider.querySelector('[data-next]');
      const sr=slider.querySelector('[aria-live]');
      let i=slides.findIndex(s=>s.classList.contains('active')); if(i<0)i=0;
      dotsBox.innerHTML=slides.map((_,n)=>`<button aria-label="Go to slide ${n+1}"></button>`).join('');
      const dots=[...dotsBox.querySelectorAll('button')];
      function show(n,announce=true){
        i=(n+slides.length)%slides.length;
        slides.forEach((s,idx)=>s.classList.toggle('active', idx===i));
        dots.forEach((d,idx)=>d.classList.toggle('active', idx===i));
        if(announce&&sr) sr.textContent=`Slide ${i+1} of ${slides.length}`;
      }
      dots.forEach((d,idx)=>d.addEventListener('click',()=>show(idx)));
      prevBtn?.addEventListener('click',()=>show(i-1));
      nextBtn?.addEventListener('click',()=>show(i+1));
      show(i,false);
      // autoslide
      let timer=null; const start=()=>{ stop(); timer=setInterval(()=>show(i+1,false), 4800); }; const stop=()=>{ if(timer) clearInterval(timer); timer=null; };
      slider.addEventListener('mouseenter', stop); slider.addEventListener('mouseleave', start); start();
      // lightbox
      const overlay=document.getElementById('lightbox'); const big=document.getElementById('lightboxImg');
      function open(src){ if(!overlay||!big) return; big.src=src; overlay.hidden=false; overlay.setAttribute('aria-hidden','false'); document.body.style.overflow='hidden'; }
      function close(){ if(!overlay||!big) return; overlay.setAttribute('aria-hidden','true'); overlay.hidden=true; big.removeAttribute('src'); document.body.style.overflow=''; }
      overlay?.querySelector('.close')?.addEventListener('click', close);
      overlay?.addEventListener('click', e=>{ if(e.target===overlay) close(); });
      document.addEventListener('keydown', e=>{ if(e.key==='Escape' && overlay?.getAttribute('aria-hidden')==='false') close(); });
      slider.querySelectorAll('img').forEach(img=>img.addEventListener('click', ()=> open(img.dataset.full || img.currentSrc || img.src)));
    })();

    // Pop-art rotator (centered caption)
    (function(){
      const el = document.getElementById('sigRotator'); if(!el || el.__cerbiPopArtInit) return; el.__cerbiPopArtInit = true;
      const sources = [
        'assets/popart/popart-01.png','assets/popart/popart-02.png','assets/popart/popart-03.png',
        'assets/popart/popart-04.png','assets/popart/popart-05.png','assets/popart/popart-06.png',
        'assets/popart/popart-07.png','assets/popart/popart-08.png','assets/popart/popart-09.png','assets/popart/popart-10.png'
      ];
      el.innerHTML = '';
      const imgs = sources.map((src, idx) => {
        const im = new Image();
        im.decoding = 'async';
        im.loading = idx === 0 ? 'eager' : 'lazy';
        im.src = src;
        im.alt = 'Cerbi pop-art ' + (idx+1);
        if (idx === 0) im.className = 'is-active';
        el.appendChild(im);
        return im;
      });
      let i = 0;
      const prefersReduced = matchMedia('(prefers-reduced-motion: reduce)').matches;
      if (!prefersReduced && imgs.length > 1) {
        setInterval(() => { imgs[i].classList.remove('is-active'); i = (i + 1) % imgs.length; imgs[i].classList.add('is-active'); }, 3500);
      }
    })();

    // Docs modal (Markdown)
    (function(){
      const modal=document.getElementById('docbox'); const content=document.getElementById('docboxContent'); if(!modal||!content) return;
      function open(){ modal.hidden=false; modal.setAttribute('aria-hidden','false'); document.body.style.overflow='hidden'; }
      function close(){ modal.setAttribute('aria-hidden','true'); modal.hidden=true; content.innerHTML=''; document.body.style.overflow=''; }
      modal.querySelector('.close')?.addEventListener('click', close);
      modal.addEventListener('click', e=>{ if(e.target===modal) close(); });
      document.addEventListener('keydown', e=>{ if(e.key==='Escape' && modal.getAttribute('aria-hidden')==='false') close(); });

      async function fetchMd(path){
        const local = path.replace(/^\/+/,'');
        try{ const r=await fetch(local, {cache:'no-store'}); if(r.ok) return await r.text(); }catch{}
        try{ const r2=await fetch(`https://raw.githubusercontent.com/Zeroshi/CerbiSite/main/${local}`, {cache:'no-store'}); if(r2.ok) return await r2.text(); }catch{}
        return '# Not found';
      }
      function mdPathFromHref(href){ try{const u=new URL(href,location.href); if(u.pathname.endsWith('.md')) return u.pathname.replace(/^\//,''); }catch{} return null; }
      async function onDocClick(e){
        e.preventDefault();
        const a=e.currentTarget; const mdRel=mdPathFromHref(a.getAttribute('href')); if(!mdRel) return;
        open(); content.innerHTML='<div style="display:grid;place-items:center;min-height:240px;padding:24px"><div class="muted">Loading…</div></div>';
        const text=await fetchMd(mdRel);
        if(window.marked && typeof window.marked.parse==='function'){ content.innerHTML=window.marked.parse(text,{mangle:false, headerIds:true}); } else { content.innerHTML='<pre class="kbd" style="white-space:pre-wrap"></pre>'; content.querySelector('pre').textContent=text; }
        content.scrollTop=0;
      }
      function attach(){ document.querySelectorAll('a.doc-link').forEach(a=>{ a.removeEventListener('click', onDocClick); a.addEventListener('click', onDocClick); }); }
      if(document.readyState==='loading'){ document.addEventListener('DOMContentLoaded', attach, {once:true}); } else { attach(); }
    })();

    // Live Rule Check switch behavior
    (function(){
      const btn=document.getElementById('piiSwitch'); const knob=document.getElementById('piiKnob'); if(!btn||!knob) return;
      let on=false;
      const sample=()=>({ userId: "12345", email: on ? "j***@corp.co" : "jane@corp.co", plan: "pro" });
      const evalRes=()=>({
        allowed:true, redactions: on? 1:0,
        violations: on? [{ field:"email", policy:"PII", action:"redact"}] : []
      });
      function render(){
        document.getElementById('inputJson').textContent = JSON.stringify(sample(), null, 2);
        document.getElementById('evalJson').textContent  = JSON.stringify(evalRes(), null, 2);
        knob.style.transform = on? 'translateX(26px)' : 'translateX(0)';
        btn.style.background = on? 'var(--brand)' : '#e8eefc';
        btn.style.borderColor = on? 'var(--brand)' : 'rgba(20,40,72,.18)';
        btn.setAttribute('aria-pressed', String(on));
      }
      btn.addEventListener('click', ()=>{ on = !on; render(); });
      render();
    })();
  </script>
</body>
</html>
